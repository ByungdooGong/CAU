# 네트워크
## 네트워크 계층 구조
- OSI 7 계층
    ```
    Physical - DataLink - Network - TransPort - Session - Presentation - Application
    ```
- TCP/IP 4계층
    ```
    Network Interface - Internet - (Host to Host)Transport - Application
    ```
- 전송계층(Transport)
    - TCP가 속해있다. 
    - 두 호스트간 연결을 맺고 통신 목적지까지 데이터를 전달하는 기능을 한다. 
    - TCP는 연결지향적
        ```
        오류제어, 흐름제어, 혼잡제어, 타이머재전송 등의 기능을 한다.
        데이터 전송선로(Session)을 만든다.
        데이터의 신뢰도가 중요하다고 판단될 때 사용한다.
        ```
    - UDP는 비연결지향적
        ```
        최소한의 오류제어 기능만 수행한다.
        실시간 멀티미디어 정보를 수행하기 위해 주로 사용한다.
        ```

## 3 Way-HandShaking
- TCP가 연결지향적 성격을 갖게 해주는 과정.
- SYN(synchronize sequence number)와 ACK(acknowledgements)

<가정> 
클라이언트 A와 서버 B 가 통신 <br>
```
[step1]
A클라이언트는 B서버에 접속을 요청하는 SYN 패킷을 보낸다. A클라이언트는 SYN을 보내고 SYN/ACK 응답을 기다리는 SYN_SENT 상태가 되는 것.

[step2]
이때 서버는 Listen 상태로 포트 서비스가 가능한 상태여야 한다. B서버는 SYN 요청을 받고 A클라이언트에게 요청을 수락한다는 ACK와 SYN flag가 설정된 패킷을 발송하고 A가 다시 ACK으로 응답하기를 기다린다. B서버는 SYN_RECEIVED 상태가 된다.

[step3]
A클라이언트는 B서버에게 ACK을 보내고 이후로부터는 연결이 이루어지고 데이터가 오가게 되는 것이다. 이때의 B서버 상태가 ESTABLISHED 이다. 
```

## 흐름제어(FLOW Control)
- 송신측과 수신측의 데이터 처리 속도 차이를 해결하기 위한 기법
- 수신측이 송신측보다 처리가 빠르면 상관없지만 반대의 경우 전송량을 수신측에 따라 제어해야한다.

    > Stop and Wait방식
    - 매번 전송한 패킷에 대해 확인응답을 받아야만 그 다음 패킷을 전송하는 방법.

    > Sliding Window
    - 수신측에서 설정한 윈도우 크기만큼 송신측에서 확인응답 없이 세그먼트를 전송할 수 있게 하여 데이터 흐름을 동적으로 조절하는 제어 기법.

    - 동작방식
        ```
        먼저 윈도우에 포함되는 모든 패킷을 전송하고, 그 패킷들의 전달이 확인되는대로 이 윈도우를 옆으로 옮김(Slide)으로써 그 다음 패킷들을 전송
        ```
    - 실제 데이터를 보내기전에 TCP-3-way-handshaking을 통해 수신컴퓨터의 window size에 자신의 send window size를 맞추게 된다. 즉 상대방이 받을 수 있는 크기에 맞춰 전송을 하게 된다. 
    - 수신 윈도우보다 작거나 같은 크기로 송신 윈도우를 지정하면 흐름제어 가능. 
    - 수신 측에서 ACK를 전송할 때마다 버퍼의 범위가 한번에 미끄러지듯이 이동.

## 혼잡제어(Congestion Control)
- 한 라우터에 데이터가 몰릴경우 혼잡하다 -> 송신측에서 보내는 데이터의 전송속도를 강제로 줄이는 방법.
- 혼잡제어 알고리즘
    > AIMD(Additive Increase / Multicative Decrease)
    - 처음에 패킷을 하나씩 보내고 이것이 문제없이 도착하면 window 크기를 1씩 증가시켜가며 전송하는 방법. 
    - 패킷전송에 실패하거나 일정 시간을 넘으면 패킷을 보내는 속도를 절반으로 줄이게 됩니다. 
    - 장점 
        - 나중에 진입하는 쪽이 불리하지만 시간이 흐르면 평형 상태로 수렴하게 되는 특징 있다. 
    - 단점
        - 초기에 네트워크의 높은 대역폭을 사용하지 못하여 오랜시간이 걸리고, 네트워크가 혼잡해지는 것을 미리 감지하지 못함.

    > Slow Start
    - 위와 비슷. 패킷이 문제없이 도착하면 ACK 패킷마다 window size를 1씩 늘려준다. 즉 한 주기가 지나면 window size가 2배가 된다. 
    - 혼잡상태가 발생하면 window size를 1로 떨어뜨린다. 

    > Fast Retransmit(빠른 재전송)
    - 추가된 방식. 먼저 도착해야할 패킷이 도착하지 않고 다음 패킷이 도착한 경우에도 ACK 패킷을 보내게 된다. 
    - 단 중간에 패킷하나가 손실되게 되면 보내는 측에서 중복된 ACK 패킷을 받게 되고, 이것을 감지하는 순간 문제가 되는 순번의 패킷을 재전송해줄 수 있다. 
    - 중복된 순번의 패킷을 3번 받으며 재전송을 하게 된다. 혼잡을 감지하고 window size를 줄인다.
    
    > Fast Recovery(빠른 회복)
    - 혼잡한 상태가 되면 winodw size를 1로 줄이지 않고 반으로 줄임. 
# 데이터 베이스
- 후보키 
    - 릴레이션을 구성하는 속성들 중에서 튜플을 유일하게 식별하기 위해 사용하는 속성들의 부분집합. 
    - 유일성과 최소성을 만족해야함.
    
- 기본키
    - 후보키 중에서 선택한 주키
    - 한 릴레이션에서 특정 튜플을 유일하게 구별할 수 있는 속성.
    - null 값을 가질 수 없음. 

- 대체키
    - 후보키 중 기본키를 제외한 나머지

- 슈퍼키
    - 한 릴레이션 내에 있는 속성들의 집합으로 구성된 키
    - 유일성은 만족하지만 최소성은 만족 못한다. 

- 외래키
    - R1과 R2가 관계를 맺고 있을 때 R1의 외래키는 R2의 기본키를 뜻한다.

## 무결성
- 개체 무결성
    -  기본키는 NULL 값이나 중복값을 가질 수 없음.
- 참조 무결성
    - 외래키는 NULL이거나 참조 릴레이션의 기본키와 같아야한다.
- 도메인 무결성
    - 특정 속성의 값이 그 속성이 정의된 도메인에 속한 값이어야한다. 



